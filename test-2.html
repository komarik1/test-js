<!DOCTYPE html>
<html>
<head>
	<title>test-2</title>
</head>

<body>
<script>

//Object.prototype.foo="bar";

var entries = [{
	"id1" : {
		"id11" : {
			"id111" : {
				"id1111" : {
					"id11111" : "5",
					"id11112" : "6"
					},
				"id1112" : {
					"id11121" : "6"
					}
				},
			"id112" : {
				"id1121" : "5"
				}
			},
		"id12" : "3"
		},
	"id2" : "2"
	},
	{
	"id1" : "1"
	}
];

// Clone: recreate from string
var myClone = function(data) {
	if ( typeof data == 'object' ) {
			var cloned_data = JSON.parse(JSON.stringify(data));
			return cloned_data;
	} else {
			return null;
	}
};
//Clone: recursively
var myRecClone = function(data) {
	if (typeof data == 'object') {
		if (data instanceof Array) {
			var cloned_data = [];
			for (var i = 0; i < data.length ; i++) {
				cloned_data[i] = myRecClone(data[i]);
			}
			return cloned_data;
		} 
		if (data instanceof Object) {
			var cloned_data = {};
			for (var key in data) {
				if (data.hasOwnProperty(key)) {
					cloned_data[key] = myRecClone(data[key]);
				}
			}
			return cloned_data;
		}
	}
};

//var cloned_entries = myClone(entries); 
var cloned_entries = myRecClone(entries);

var printJSON = function(data) {
	var str = '';
	if (typeof data === 'object') {
		str = JSON.stringify(data, null, 4)
	}
	return str;
};

if (typeof cloned_entries === 'object') {
	console.log("Print cloned object as JSON:");
	for (var i in entries) {
		console.log("Item " + i);
		console.log(printJSON(entries[i])); 
	}
} else {
		console.log("Not an object"); 
};

//Misc output
//Always 'false' because links are compared, not objects
//console.log(cloned_entries === entries);
console.log("Original object: ");
console.log(entries);
console.log("Cloned object for some reason not consistent with printJSON result: ");
console.log(cloned_entries); 

// Check that the object was cloned
entries[1]["id1"] = "new value";
if (cloned_entries[1]["id1"] == "1") {
	console.log("Cloned OK");
};

</script>
</body>
</html>
